<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.westcatr.vcms.mapper.ConferenceRoomReservationMapper">

    <!-- 通用查询映射结果 -->
    <resultMap id="BaseResultMap" type="com.westcatr.vcms.entity.ConferenceRoomReservation">
        <id column="id" property="id" />
        <result column="start_date_time" property="startDateTime" />
        <result column="end_date_time" property="endDateTime" />
        <result column="conference_theme" property="conferenceTheme" />
        <result column="room_id" property="roomId" />
        <result column="room_name" property="roomName" />
        <result column="reserved_name" property="reservedName" />
        <result column="create_time" property="createTime" />
        <result column="update_time" property="updateTime" />
    </resultMap>

    <resultMap id="ConferenceRoomDateCountMap" type="com.westcatr.vcms.param.ConferenceRoomDateCount">
        <result column="time" property="schedulTime" />
        <result column="count" property="schedulCount" />
    </resultMap>

    <select id="schedulCount" resultMap="ConferenceRoomDateCountMap">
        SELECT DATE_FORMAT( start_date_time, "%Y-%m-%d" ) AS time,count(1) 'count' FROM vc_conference_room_reservation GROUP BY time ORDER BY time;
    </select>

</mapper>
